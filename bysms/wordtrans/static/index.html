<!--
 * @Author: Ruochen Xue
 * @Date:   2020-06-23 15:57:29
 * @Last Modified by: Ruochen Xue
 * @Last Modified time: 2020-06-26 15:57:29
 */
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation Tool</title>
    <!-- JS -->
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>
    <script src="js/md5.js"></script>
    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!--index style-->
    <link rel="stylesheet" href="css/index.css">
    
    <script>
       	$(document).ready(function(){
	
	var appid = '20210625000871960';
	var key = '0QMEkNIdfW2LudZqhD4U';
	var salt = (new Date).getTime();
	var from = 'auto';
	var to = 'auto';


// word translation
	$(".iconBtn.darkBtn").click(function(){
		var query = $("#sourceInputField").val();
		console.info(query)
		$.ajax({
		url: 'http://127.0.0.1/wordtrans/',
		dataType:"json",
		type: 'POST',
		contentType: "application/json;charset=UTF-8",
		async: true,
		data: JSON.stringify({word: query}),
		success: function (data) {
			console.log(data);
			if(data.status == 200){
				var res=data.data.definitions;
				$(".targetText")[0].innerHTML=res;
				console.log(res);
			}else{
				$(".targetText")[0].innerHTML='Query fails';
			}

		}
	});
	})


// through url to get the text paragraph
    // $(".historyBtn").click(
    //     function GetAjaxData() {
    //         console.log("confirm click");
    //     $.ajax({
    //         type: "GET",
    //         async: true,
    //         url: url,
    //         dataType: "html",
    //         // jsonp: "callback",//传递给请求处理程序或页面的，标识jsonp回调函数名(一般为:callback)
    //         // jsonpCallback: "GetData",//callback的function名称
    //         data:{
    //             // q: "javascript",
    //             // count: 1
    //         },
    //         success: function (response, status, xhr) {
    //             console.log(response);
    //         },
    //         error: function () {
    //             alert('fail');
    //         }
    //     });
    //     // document.domain = "a.com";
    //     // var frame = document.getElementsByTagName("iframe")[0];
    //     // var doc = frame.contentDocument || frame.contentWindow.document;
    //     // console.log(doc);
    // })
    // function callback(){
    //     console.log(1);
    // }

	})

    //audio function for input
    function doTTS1() {
    var ttsDiv = document.getElementById('bdtts_div_id');
    var ttsAudio = document.getElementById('tts_autio_id');
    var ttsText = document.getElementById('sourceInputField').value;

    ttsDiv.removeChild(ttsAudio);
    var au1 = '<audio id="tts_autio_id" autoplay="autoplay">';
    var sss = '<source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&per=3&spd=5&text=' + ttsText + '" type="audio/mpeg">';
    var eee = '<embed id="tts_embed_id" height="0" width="0" src="">';
    var au2 = '</audio>';
    ttsDiv.innerHTML = au1 + sss + eee + au2;

    ttsAudio = document.getElementById('tts_autio_id');

    ttsAudio.play();
  }

      //audio function for output
    function doTTS2() {
    var ttsDiv = document.getElementById('bdtts_div_id1');
    var ttsAudio = document.getElementById('tts_autio_id1');
    var ttsText = $(".targetText")[0].innerHTML;
    console.log(ttsText);
    
    ttsDiv.removeChild(ttsAudio);
    var au1 = '<audio id="tts_autio_id1" autoplay="autoplay">';
    var sss = '<source id="tts_source_id1" src="http://tts.baidu.com/text2audio?lan=en&ie=UTF-8&per=3&spd=5&text=' + ttsText + '" type="audio/mpeg">';
    var eee = '<embed id="tts_embed_id1" height="0" width="0" src="">';
    var au2 = '</audio>';
    ttsDiv.innerHTML = au1 + sss + eee + au2;

    ttsAudio = document.getElementById('tts_autio_id1');

    ttsAudio.play();
  }

     //copy text
  function copyText() {
  var text = $(".targetText")[0].innerHTML;
  var input = document.getElementById("input");
  input.value = text; // 修改文本框的内容
  input.select(); // 选中文本
  document.execCommand("copy"); // 执行浏览器复制命令
  alert("copy success");
 }
  
   
    </script>
</head>

<body style="background-color: aliceblue;">
    <div class="my-container">
        <div class="banner"  style="background-color: aliceblue;">
            <div class="title-section mt-5 mb-5">
                <div class="my-title">
                    <h1 class="display-4">Translation Tool</h1>
                    <p>This tool aims to design a webpage for English speakers, who expect to obtain translation from
                        Chinese to English together with more linguistic information.
                    </p>
                    <div class="webappLayout">
                        <div id="react-webapp">
                            <div class="translateWebApp">
                                <div class="translateHolder">
                                    <div class="translateBox source">
                                        <div class="boxTop">
                                            <div class="customSelect sourceLang">
                                                <button type="button", class="mainButton">
                                                    <img class="flag" src="https://itranslate-webapp-production.web.app/images/zh-CN.svg" alt="zh-CN">
                                                    Chinese     
                                                    <!-- <img class="arrowdown" src="https://itranslate-webapp-production.web.app/images/icon-chevron.svg" alt="switch"> -->
                                                </button>
                                            </div>
                                            <div class="langHistoryHolder">
                                                <!-- <button type="button" class="historyBtn">Spanish</button> -->
                                                
                                                <!-- Confirm button -->
                                                <!-- <button type="button" class="historyBtn">Confirm</button> -->
                                            </div>

                                            <!-- translation convert -->
                                            <button class="iconBtn darkBtn" type="button" data-button="btn-switch">
                                                Translate
                                                <!-- <img src="https://itranslate-webapp-production.web.app/images/icon-switch.svg" alt="switch"> -->
                                            </button>
                                        </div>
                                        <div class="boxMiddle">
                                            <textarea id="sourceInputField" placeholder="Enter text or URL" name="sourceText" style="height: 30px;"></textarea>
                                        </div>
                                        <div class="boxBottomHolder">
                                            <div class="suggestHolder">
                                                <div class="boxBottom">
                                                    <button class="iconBtn lightBtn" type="button" onclick="doTTS1()">
                                                        <img src="https://itranslate-webapp-production.web.app/images/icon-speaker.svg" alt="voice">
                                                    </button>
                                                    <div id="bdtts_div_id">
                                                        <audio id="tts_autio_id" autoplay="autoplay">
                                                          <source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=5&per=1&text=请输入文字" type="audio/mpeg">
                                                          <embed id="tts_embed_id" height="0" width="0" src="">
                                                        </audio>
                                                      </div>
                                                </div>
                                            </div>
                                        </div>
                                </div>
                                <div class="translateBox target">
                                    <div class="boxTop">
                                        <div class="customSelect targetLang">
                                            <button type="button", class="mainButton">
                                                <img class="flag" src="https://itranslate-webapp-production.web.app/images/en-UK.svg" alt="en-UK">
                                                English
                                                <!-- <img class="arrowdown" src="https://itranslate-webapp-production.web.app/images/icon-chevron.svg" alt="switch"> -->
                                            </button>
                                        </div>
                                        <!-- <div class="langHistoryHolder">
                                            <button type="button" class="historyBtn">Spanish</button>
                                            <button type="button" class="historyBtn">French</button>
                                        </div> -->
                                    </div>
                                    <div class="targetText" role="presentation"></div>
                                    <textarea id="input" style="position: absolute;top: 0;left: 0;opacity: 0;z-index: -10;">used for copy text</textarea>
                                    <div class="boxBottomHolder">
                                        <div class="boxBottom">
                                            <button class="iconBtn lightBtn" type="button" data-button="btn-switch" onclick="copyText()">
                                                <span class="infoText">Text copied</span>
                                                <img src="https://itranslate-webapp-production.web.app/images/icon-copy.svg" alt="copy">
                                            </button>
                                            <button class="iconBtn lightBtn" type="button"  onclick="doTTS2()">
                                                <img src="https://itranslate-webapp-production.web.app/images/icon-speaker.svg" alt="voice">
                                            </button>
                                            <div id="bdtts_div_id1">
                                                <audio id="tts_autio_id1" autoplay="autoplay">
                                                  <source id="tts_source_id1" src="http://tts.baidu.com/text2audio?lan=en&ie=UTF-8&spd=5&per=1&text=please enter the text" type="audio/mpeg">
                                                  <embed id="tts_embed_id1" height="0" width="0" src="">
                                                </audio>
                                              </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>         
            </div>         
        </div>
    </div>
   <!-- footer -->
    <div class="footerBar"></div>
</div>
<!-- <iframe src="https://www.baidu.com" width="100%" height="100px"></iframe> -->
 
</body>
<script>
    $(".footerBar").load("./footer.html");
</script>

</html>